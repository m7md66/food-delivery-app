@model IEnumerable<FoodDeliveryApp.ViewModels.OrderList>
@{
     
    ViewData["Title"] = "Orders";
   Layout = "~/Views/Shared/_MyLayout.cshtml";
}

<table id="example" class="table table-striped text-light" style="width:100%">
        <thead>
            <tr>
                <th>Order Refrence</th>
                <th>Order Time</th>
                <th>Total Price</th>
                <th>Delivered State</th>
                <th>Customer Name</th>
                <th>Customer Class</th>
            </tr>
        </thead>
        <tbody>
        @if (Model != null)
        {
            @foreach (var order in Model)
            {
                <tr>
                    <td>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal-@order.OrderRefrence">
                            @order.OrderRefrence
                         </button>

                         @*modal*@
                                   <div class="modal fade" id="exampleModal-@order.OrderRefrence" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                       <div class="modal-dialog" role="document">
                                         <div class="modal-content">
                                           <div class="modal-header">
                                             <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                                             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                               <span aria-hidden="true">&times;</span>
                                             </button>
                                           </div>
                                           <div class="modal-body">
                                            <table style="">
                                                
                                                @foreach(var item in order.items) 
                                                {
                                                <tr>
                                                    <td>Item Name</td>
                                                    <td>@item.Name</td>
                                                </tr> 
                                                 <tr>
                                                    <td>Item Price</td>
                                                    <td>@item.Price</td>
                                                 </tr> 
                                                 }
                                
                                                 <tr>
                                
                                                     <td>total Price</td>
                                
                                                     <td>@order.TotalPrice</td>
                                
                                                 </tr>
                                 
                                            </table>
                                       </div>
                                   <div class="modal-footer">
                               <a  class="btn btn-secondary" data-dismiss="modal">Close</a>
                               <a  asp-controller="Orders" asp-action="Deliver" asp-route-id="@order.OrderRefrence"  class="btn btn-primary">Deliver It!</a>
                             </div>
                           </div>
                         </div>
                       </div>

                         @*modal    *@

                </td>
                <td>@order.OrderTime</td>
                <td>@order.TotalPrice</td>
                    <td>@if(@order.DeliveredState) { <p>Delivered</p>} else{<p>Not Delivered</p>}</td>
                    <td>@order.CustomerName</td>
                <td>@order.CustomerClass</td>
            </tr>
            } @*foreach*@
            } @*end if*@
            <tr>
                <td>Garrett Winters</td>
                <td>Accountant</td>
                <td>Tokyo</td>
                <td>63</td>
                <td>2011-07-25</td>
                <td>$170,750</td>
            </tr>
            <tr>
                <td>Ashton Cox</td>
                <td>Junior Technical Author</td>
                <td>San Francisco</td>
                <td>66</td>
                <td>2009-01-12</td>
                <td>$86,000</td>
            </tr>
            <tr>
                <td>Cedric Kelly</td>
                <td>Senior Javascript Developer</td>
                <td>Edinburgh</td>
                <td>22</td>
                <td>2012-03-29</td>
                <td>$433,060</td>
            </tr>
           
            <tr>
                <td>Dai Rios</td>
                <td>Personnel Lead</td>
                <td>Edinburgh</td>
                <td>35</td>
                <td>2012-09-26</td>
                <td>$217,500</td>
            </tr>
            <tr>
                <td>Jenette Caldwell</td>
                <td>Development Lead</td>
                <td>New York</td>
                <td>30</td>
                <td>2011-09-03</td>
                <td>$345,000</td>
            </tr>
            <tr>
                <td>Yuri Berry</td>
                <td>Chief Marketing Officer (CMO)</td>
                <td>New York</td>
                <td>40</td>
                <td>2009-06-25</td>
                <td>$675,000</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th>Order Refrence</th>
                <th>Position</th>
                <th>Office</th>
                <th>Age</th>
                <th>Start date</th>
                <th>Salary</th>
            </tr>
        </tfoot>
    </table>


    @section Scripts{

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
             <script>
                $(document).ready(function () {
                $('#example').DataTable();
                 });
             </script>
                 }
